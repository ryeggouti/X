<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Our Memory Album üíï</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- iOS 18.4 Emoji Renderer -->
  <script>
    // iOS 18.4 Emoji Renderer using Apple-style emoji images
    (function() {
      // Get iOS 18.4 style emoji image URL
      function getEmojiImageURL(emoji) {
        // Using emojicdn with apple style parameter for iOS 18.4 appearance
        // This service provides Apple-style emojis that match iOS 18.4
        return `https://emojicdn.elk.sh/${encodeURIComponent(emoji)}?style=apple`;
      }
      
      function parseEmojisToiOS(element = document.body) {
        if (!element) return;
        
        // Find all text nodes that contain emojis
        const walker = document.createTreeWalker(
          element,
          NodeFilter.SHOW_TEXT,
          {
            acceptNode: function(node) {
              // Skip if parent is already processed or is a script/style tag
              const parent = node.parentNode;
              if (parent && (parent.tagName === 'SCRIPT' || parent.tagName === 'STYLE')) {
                return NodeFilter.FILTER_REJECT;
              }
              if (parent && parent.classList && parent.classList.contains('emoji-processed')) {
                return NodeFilter.FILTER_REJECT;
              }
              // Check if node contains emoji
              const text = node.textContent;
              if (/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{1F900}-\u{1F9FF}]|[\u{1FA00}-\u{1FAFF}]/u.test(text)) {
                return NodeFilter.FILTER_ACCEPT;
              }
              return NodeFilter.FILTER_REJECT;
            }
          },
          false
        );
        
        const textNodes = [];
        let node;
        while (node = walker.nextNode()) {
          textNodes.push(node);
        }
        
        textNodes.forEach(textNode => {
          const parent = textNode.parentNode;
          if (!parent || parent.classList.contains('emoji-processed')) return;
          
          const text = textNode.textContent;
          // Match emojis including skin tones and sequences
          const emojiRegex = /([\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{1F900}-\u{1F9FF}]|[\u{1FA00}-\u{1FAFF}])(\u{1F3FB}-\u{1F3FF})?(\u{200D}[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}])*/gu;
          
          if (emojiRegex.test(text)) {
            const parts = [];
            let lastIndex = 0;
            let match;
            
            // Reset regex
            emojiRegex.lastIndex = 0;
            
            while ((match = emojiRegex.exec(text)) !== null) {
              // Add text before emoji
              if (match.index > lastIndex) {
                parts.push({ type: 'text', content: text.substring(lastIndex, match.index) });
              }
              // Add emoji
              parts.push({ type: 'emoji', content: match[0] });
              lastIndex = match.index + match[0].length;
            }
            
            // Add remaining text
            if (lastIndex < text.length) {
              parts.push({ type: 'text', content: text.substring(lastIndex) });
            }
            
            if (parts.some(p => p.type === 'emoji')) {
              const fragment = document.createDocumentFragment();
              
              parts.forEach(part => {
                if (part.type === 'emoji') {
                  const img = document.createElement('img');
                  img.src = getEmojiImageURL(part.content);
                  img.alt = part.content;
                  img.className = 'emoji';
                  img.loading = 'lazy';
                  img.setAttribute('aria-label', `Emoji: ${part.content}`);
                  fragment.appendChild(img);
                } else if (part.content) {
                  fragment.appendChild(document.createTextNode(part.content));
                }
              });
              
              parent.replaceChild(fragment, textNode);
              parent.classList.add('emoji-processed');
            }
          }
        });
      }
      
      // Expose globally
      window.parseEmojis = function(element) {
        parseEmojisToiOS(element || document.body);
      };
      
      // Parse on load
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          setTimeout(() => parseEmojisToiOS(), 100);
        });
      } else {
        setTimeout(() => parseEmojisToiOS(), 100);
      }
    })();
  </script>
  <style>
    :root {
      --bg: #fff8fb;
      --card: #fff;
      --accent: #f7c6d7;
      --muted: #a88b9f;
      --shadow: 0 8px 24px rgba(120,80,110,0.08);
      --radius: 18px;
    }
    * {
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      margin: 0;
      background: linear-gradient(135deg, #ffe6ef 0%, #fff5f8 25%, #fff8fb 50%, #fef7ff 75%, #ffeef6 100%);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      color: #40283a;
      overflow-x: hidden;
      font-family: 'Poppins', sans-serif;
      position: relative;
    }

    /* Aesthetic iOS Emoji Styling */
    img.emoji {
      height: 1.2em;
      width: 1.2em;
      min-height: 20px;
      min-width: 20px;
      margin: 0 0.08em;
      vertical-align: -0.15em;
      display: inline-block;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      filter: drop-shadow(0 2px 4px rgba(122, 47, 74, 0.1));
      object-fit: contain;
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
      animation: emojiFadeIn 0.4s ease-out;
    }

    /* Hover effect for interactive emojis */
    button img.emoji,
    .heart img.emoji,
    .logo img.emoji,
    .floating-heart img.emoji {
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    button:hover img.emoji,
    .heart:hover img.emoji,
    .logo:hover img.emoji {
      transform: scale(1.15) rotate(5deg);
      filter: drop-shadow(0 4px 8px rgba(255, 182, 193, 0.4));
    }

    /* Floating hearts animation enhancement */
    .floating-heart img.emoji {
      animation: floatHeart 20s infinite ease-in-out;
      filter: drop-shadow(0 2px 6px rgba(255, 182, 193, 0.3));
    }

    @keyframes floatHeart {
      0% {
        transform: translateY(100vh) rotate(0deg) scale(1);
        opacity: 0;
      }
      10% {
        opacity: 0.6;
      }
      50% {
        transform: translateY(50vh) rotate(180deg) scale(1.1);
      }
      90% {
        opacity: 0.6;
      }
      100% {
        transform: translateY(-100px) rotate(360deg) scale(1);
        opacity: 0;
      }
    }

    /* Emoji in captions - subtle bounce on appear */
    .caption img.emoji {
      animation: emojiAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes emojiAppear {
      0% {
        transform: scale(0) rotate(-180deg);
        opacity: 0;
      }
      60% {
        transform: scale(1.2) rotate(10deg);
      }
      100% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
      }
    }

    /* Logo emoji - special styling */
    .logo img.emoji {
      height: 1.5em;
      width: 1.5em;
      filter: drop-shadow(0 4px 8px rgba(250, 200, 230, 0.5));
      animation: logoPulse 3s ease-in-out infinite;
    }

    @keyframes logoPulse {
      0%, 100% {
        transform: scale(1);
        filter: drop-shadow(0 4px 8px rgba(250, 200, 230, 0.5));
      }
      50% {
        transform: scale(1.05);
        filter: drop-shadow(0 6px 12px rgba(255, 182, 193, 0.6));
      }
    }

    /* Intro title emoji */
    .intro-title img.emoji {
      height: 1.3em;
      width: 1.3em;
      animation: titleEmoji 2s ease-in-out infinite;
      filter: drop-shadow(0 3px 6px rgba(122, 47, 74, 0.2)) 
              drop-shadow(0 0 10px rgba(255, 182, 193, 0.3));
    }

    @keyframes titleEmoji {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-5px) rotate(10deg);
      }
    }

    /* Special glow for emojis in buttons and interactive elements */
    button img.emoji,
    .heart img.emoji {
      filter: drop-shadow(0 2px 4px rgba(122, 47, 74, 0.15))
              drop-shadow(0 0 8px rgba(255, 182, 193, 0.2));
    }

    button:active img.emoji,
    .heart:active img.emoji {
      transform: scale(0.95);
      transition: transform 0.1s ease;
    }

    /* Lyrics emoji styling */
    .lyrics-line img.emoji {
      height: 1.1em;
      width: 1.1em;
      vertical-align: -0.1em;
      filter: drop-shadow(0 2px 4px rgba(122, 47, 74, 0.15));
      transition: all 0.5s ease;
    }

    .lyrics-line.active img.emoji {
      height: 1.3em;
      width: 1.3em;
      filter: drop-shadow(0 4px 8px rgba(255, 182, 193, 0.5));
      transform: scale(1.1);
    }

    @keyframes emojiFadeIn {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* Heart Drawing Animation - Pink & White Theme */
    .heart-loader {
      position: absolute;
      display: block;
      left: 50%;
      top: 50%;
      margin-top: -150px;
      width: 300px;
      height: 300px;
      overflow: visible;
    }

    .heart-loader__group {
      transform-origin: 0 90px;
      animation: group-anim 7s 0.1s infinite;
    }

    .heart-loader__square {
      stroke: rgba(168, 139, 159, 0.4);
      stroke-dasharray: 240, 240;
      stroke-dashoffset: 240;
      animation: square-anim 7s 0.1s infinite;
    }

    .heart-loader__circle {
      stroke: rgba(168, 139, 159, 0.4);
      stroke-dasharray: 188.522, 188.522;
      stroke-dashoffset: 188.522;
      transform-origin: 60px 30px;
    }

    .heart-loader__circle.m--left {
      animation: left-circle-anim 7s 0.1s infinite;
    }

    .heart-loader__circle.m--right {
      animation: right-circle-anim 7s 0.1s infinite;
    }

    .heart-loader__heartPath {
      stroke: #d87a8a;
      fill: transparent;
      stroke-dasharray: 308.522, 308.522;
      stroke-dashoffset: 308.522;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      animation: heart-anim 7s 0.1s infinite;
      filter: drop-shadow(0 2px 4px rgba(216, 122, 138, 0.3));
    }

    @keyframes square-anim {
      12% {
        stroke-dashoffset: 0;
      }
      43% {
        stroke-dashoffset: 0;
        opacity: 1;
      }
      85% {
        stroke-dashoffset: 0;
        opacity: 0;
      }
      100% {
        stroke-dashoffset: 0;
        opacity: 0;
      }
    }

    @keyframes left-circle-anim {
      12% {
        stroke-dashoffset: 188.522;
      }
      31% {
        stroke-dashoffset: 0;
        transform: translateY(0);
      }
      41% {
        stroke-dashoffset: 0;
        transform: translateY(-30px);
      }
      43% {
        stroke-dashoffset: 0;
        transform: translateY(-30px);
        opacity: 1;
      }
      85% {
        stroke-dashoffset: 0;
        transform: translateY(-30px);
        opacity: 0;
      }
      100% {
        stroke-dashoffset: 0;
        transform: translateY(-30px);
        opacity: 0;
      }
    }

    @keyframes right-circle-anim {
      12% {
        stroke-dashoffset: 188.522;
      }
      31% {
        stroke-dashoffset: 0;
        transform: translateX(0);
      }
      41% {
        stroke-dashoffset: 0;
        transform: translateX(30px);
      }
      43% {
        stroke-dashoffset: 0;
        transform: translateX(30px);
        opacity: 1;
      }
      85% {
        stroke-dashoffset: 0;
        transform: translateX(30px);
        opacity: 0;
      }
      100% {
        stroke-dashoffset: 0;
        transform: translateX(30px);
        opacity: 0;
      }
    }

    @keyframes group-anim {
      43% {
        transform: rotate(0);
      }
      54% {
        transform: rotate(-45deg);
      }
      90% {
        transform: rotate(-45deg);
        opacity: 1;
      }
      97% {
        transform: rotate(-45deg);
        opacity: 0;
      }
      100% {
        transform: rotate(-45deg);
        opacity: 0;
      }
    }

    @keyframes heart-anim {
      55% {
        stroke-dashoffset: 308.522;
        fill: transparent;
      }
      70% {
        stroke-dashoffset: 0;
        fill: transparent;
      }
      87% {
        stroke-dashoffset: 0;
        fill: rgba(255, 182, 193, 0.3);
      }
      100% {
        stroke-dashoffset: 0;
        fill: rgba(255, 182, 193, 0.3);
      }
    }

    /* Heart loader container */
    .heart-loader-container {
      position: relative;
      width: 300px;
      height: 300px;
      margin: 0 auto 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      opacity: 1;
      transition: opacity 0.5s ease;
    }

    .heart-loader-container.show {
      opacity: 1;
    }

    .heart-loader-container.hide {
      opacity: 0;
      pointer-events: none;
    }

    /* Responsive sizing for heart loader */
    @media (max-width: 768px) {
      .heart-loader {
        width: 200px;
        height: 200px;
        margin-top: -100px;
      }
      
      .heart-loader-container {
        width: 200px;
        height: 200px;
        margin-bottom: 30px;
      }
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Animated background elements */
    .bg-decoration {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .floating-heart {
      position: absolute;
      color: rgba(255, 182, 193, 0.3);
      font-size: 20px;
      animation: float 20s infinite ease-in-out;
    }

    .floating-heart:nth-child(1) { left: 10%; animation-delay: 0s; }
    .floating-heart:nth-child(2) { left: 20%; animation-delay: 2s; }
    .floating-heart:nth-child(3) { left: 30%; animation-delay: 4s; }
    .floating-heart:nth-child(4) { left: 40%; animation-delay: 6s; }
    .floating-heart:nth-child(5) { left: 50%; animation-delay: 8s; }
    .floating-heart:nth-child(6) { left: 60%; animation-delay: 10s; }
    .floating-heart:nth-child(7) { left: 70%; animation-delay: 12s; }
    .floating-heart:nth-child(8) { left: 80%; animation-delay: 14s; }
    .floating-heart:nth-child(9) { left: 90%; animation-delay: 16s; }

    @keyframes float {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.5;
      }
      90% {
        opacity: 0.5;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }

    .glow-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0.4;
      animation: drift 25s infinite ease-in-out;
    }

    .glow-orb-1 {
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, #ffb6c1, #ffc0cb);
      top: 10%;
      left: 10%;
      animation-delay: 0s;
    }

    .glow-orb-2 {
      width: 250px;
      height: 250px;
      background: radial-gradient(circle, #ffd6e6, #ffeef6);
      top: 60%;
      right: 15%;
      animation-delay: 5s;
    }

    .glow-orb-3 {
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, #ffe6ef, #fff5f8);
      bottom: 20%;
      left: 50%;
      animation-delay: 10s;
    }

    @keyframes drift {
      0%, 100% {
        transform: translate(0, 0) scale(1);
      }
      33% {
        transform: translate(50px, -50px) scale(1.1);
      }
      66% {
        transform: translate(-30px, 30px) scale(0.9);
      }
    }

    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: rgba(255, 182, 193, 0.8);
      border-radius: 50%;
      animation: sparkle 3s infinite;
    }

    .sparkle:nth-child(1) { top: 20%; left: 15%; animation-delay: 0s; }
    .sparkle:nth-child(2) { top: 40%; left: 35%; animation-delay: 0.5s; }
    .sparkle:nth-child(3) { top: 60%; left: 55%; animation-delay: 1s; }
    .sparkle:nth-child(4) { top: 30%; left: 75%; animation-delay: 1.5s; }
    .sparkle:nth-child(5) { top: 70%; left: 25%; animation-delay: 2s; }
    .sparkle:nth-child(6) { top: 50%; left: 85%; animation-delay: 2.5s; }

    @keyframes sparkle {
      0%, 100% {
        opacity: 0;
        transform: scale(0);
      }
      50% {
        opacity: 1;
        transform: scale(1.5);
      }
    }

    /* Intro Screen */
    .intro-screen {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(135deg, rgba(255, 230, 239, 0.95), rgba(255, 248, 251, 0.95));
      backdrop-filter: blur(10px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
      text-align: center;
      animation: fadeIn 1s ease forwards;
    }

    .intro-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: #7a2f4a;
      margin-bottom: 10px;
      animation: fadeUp 1.5s ease forwards;
    }

    .intro-subtitle {
      font-size: 1.1rem;
      color: var(--muted);
      margin-bottom: 30px;
      animation: fadeUp 1.5s ease forwards;
    }

    .enter-btn {
      padding: 16px 40px;
      font-size: 1.2rem;
      color: #7a2f4a;
      background: linear-gradient(90deg, #ffdfe7, #ffeef6);
      border: none;
      border-radius: 999px;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(120,80,110,0.15);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .enter-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(255,180,220,0.35);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Album */
    .wrap { 
      display: none; 
      min-height: 100vh; 
      align-items: center; 
      justify-content: center; 
      padding: 30px; 
      animation: fadeIn 1s ease forwards;
      position: relative;
      z-index: 1;
    }
    .wrap.visible { display: flex; }

    .album {
      width: 920px; 
      max-width: 95vw; 
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(30px);
      border-radius: 22px; 
      padding: 28px; 
      box-shadow: var(--shadow); 
      position: relative; 
      overflow: hidden;
      z-index: 2;
    }

    header { 
      display: flex; 
      gap: 18px; 
      align-items: center; 
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .header-left {
      display: flex;
      gap: 18px;
      align-items: center;
    }

    .logo { 
      width: 64px; 
      height: 64px; 
      border-radius: 12px; 
      background: linear-gradient(135deg,var(--accent),#ffdfe7); 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-weight: 700; 
      color: #7a2f4a; 
      box-shadow: 0 6px 18px rgba(250,200,230,0.35); 
      font-size: 24px;
    }

    h1 { font-size: 20px; margin: 0; }
    p.lead { margin: 4px 0 0; color: var(--muted); font-size: 14px; }

    .add-memory-btn {
      padding: 10px 20px;
      background: linear-gradient(90deg, #ffdfe7, #ffeef6);
      border: none;
      border-radius: 999px;
      color: #7a2f4a;
      font-weight: 600;
      cursor: pointer;
      font-size: 14px;
      transition: transform 0.2s;
    }

    .add-memory-btn:hover {
      transform: translateY(-2px);
    }

    .stage { 
      margin-top: 22px; 
      display: flex; 
      align-items: center; 
      gap: 20px; 
    }

    .frame { 
      flex: 1; 
      display: flex; 
      justify-content: center; 
    }

    .polaroid { 
      width: 640px; 
      max-width: 82vw; 
      background: #fff; 
      border-radius: 14px; 
      padding: 18px; 
      padding-bottom: 56px; 
      box-shadow: 0 18px 40px rgba(100,40,70,0.12); 
      position: relative; 
      transition: transform .45s cubic-bezier(.2,.9,.25,1); 
    }

    .photo { 
      height: 420px; 
      border-radius: 8px; 
      background-size: cover; 
      background-position: center; 
      transition: opacity 0.4s ease;
      background-color: #f5f5f5;
    }

    .caption { 
      position: absolute; 
      left: 18px; 
      right: 18px; 
      bottom: 18px; 
      font-size: 15px; 
      color: #6a3f53; 
    }

    .date {
      position: absolute;
      left: 18px;
      top: 18px;
      background: rgba(255,255,255,0.9);
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 12px;
      color: var(--muted);
    }

    .nav { 
      width: 86px; 
      display: flex; 
      flex-direction: column; 
      gap: 12px; 
      align-items: center; 
    }

    .btn { 
      background: transparent; 
      border: 0; 
      font-size: 26px; 
      padding: 10px; 
      border-radius: 12px; 
      cursor: pointer; 
      color: #7a2f4a;
      transition: background 0.2s;
    }

    .btn:hover {
      background: rgba(255,223,231,0.3);
    }

    .page-ind { 
      font-size: 13px; 
      color: var(--muted); 
    }

    .controls { 
      display: flex; 
      align-items: center; 
      gap: 12px; 
      margin-top: 18px; 
      flex-wrap: wrap;
    }

    .play { 
      padding: 8px 16px; 
      border-radius: 999px; 
      border: 0; 
      background: linear-gradient(90deg,#ffdfe7,#ffeef6); 
      cursor: pointer; 
      color: #7a2f4a;
      font-weight: 500;
      font-size: 14px;
    }

    .small {
      font-size: 12px;
      color: var(--muted);
    }

    footer { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      margin-top: 18px; 
      flex-wrap: wrap;
      gap: 10px;
    }

    .heart { 
      background: linear-gradient(90deg,#ffd6e6,#ffeef6); 
      border-radius: 999px; 
      padding: 8px 16px; 
      border: 0; 
      cursor: pointer;
      color: #7a2f4a;
      font-weight: 500;
      font-size: 14px;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--muted);
    }

    .empty-state h2 {
      font-size: 24px;
      margin-bottom: 10px;
      color: #7a2f4a;
    }

    /* Lyrics Display - Side Positioned */
    .lyrics-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      align-items: flex-start;
      justify-content: flex-start;
      z-index: 0;
      pointer-events: none;
      padding: 0;
      overflow: hidden;
    }

    .lyrics-container.show {
      display: flex;
    }

    .lyrics-content {
      max-width: 50%;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
      gap: 0;
      padding: 80px 60px;
      min-height: 100vh;
    }

    .lyrics-line {
      font-size: 28px;
      line-height: 1.8;
      color: rgba(139, 90, 90, 0.4);
      transition: all 0.6s ease;
      padding: 8px 0;
      margin: 0;
      text-align: left;
      white-space: normal;
      font-weight: 400;
      text-transform: none;
      letter-spacing: 0;
      font-family: 'Poppins', sans-serif;
    }

    .lyrics-line.active {
      color: #d87a8a;
      font-size: 36px;
      font-weight: 700;
      text-shadow: none;
      transform: none;
      letter-spacing: 0;
      opacity: 1;
    }

    .lyrics-line.past {
      color: rgba(139, 90, 90, 0.3);
      font-size: 24px;
      opacity: 1;
    }

    @media (max-width: 1200px) {
      .lyrics-content {
        max-width: 45%;
        padding: 60px 40px;
      }
      .lyrics-line {
        font-size: 24px;
      }
      .lyrics-line.active {
        font-size: 32px;
      }
      .lyrics-line.past {
        font-size: 20px;
      }
    }

    @media (max-width: 768px) {
      .lyrics-content {
        max-width: 100%;
        padding: 40px 30px;
      }
      .lyrics-line {
        font-size: 20px;
      }
      .lyrics-line.active {
        font-size: 28px;
      }
      .lyrics-line.past {
        font-size: 18px;
      }
    }

    .toggle-lyrics {
      margin-left: 10px;
      padding: 8px 16px;
      border-radius: 999px;
      border: 0;
      background: linear-gradient(90deg,#ffd6e6,#ffeef6);
      cursor: pointer;
      color: #7a2f4a;
      font-weight: 500;
      font-size: 12px;
    }

    .toggle-lyrics:hover {
      transform: translateY(-1px);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 100;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-header h2 {
      margin: 0;
      color: #7a2f4a;
      font-size: 24px;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 28px;
      cursor: pointer;
      color: var(--muted);
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #7a2f4a;
      font-weight: 500;
      font-size: 14px;
    }

    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #ffeef6;
      border-radius: 10px;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
      transition: border-color 0.2s;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--accent);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .url-input-hint {
      font-size: 12px;
      color: var(--muted);
      margin-top: 6px;
      line-height: 1.4;
    }

    .url-input-hint a {
      color: var(--accent);
      text-decoration: none;
    }

    .url-input-hint a:hover {
      text-decoration: underline;
    }

    .image-preview {
      margin-top: 10px;
      max-width: 100%;
      max-height: 200px;
      border-radius: 8px;
      display: none;
      border: 2px solid #ffeef6;
    }

    .image-preview.show {
      display: block;
    }

    .preview-error {
      margin-top: 10px;
      padding: 10px;
      background: #ffe6e6;
      border-radius: 8px;
      color: #d32f2f;
      font-size: 12px;
      display: none;
    }

    .preview-error.show {
      display: block;
    }

    .modal-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 20px;
    }

    .btn-primary {
      padding: 12px 24px;
      background: linear-gradient(90deg, #ffdfe7, #ffeef6);
      border: none;
      border-radius: 999px;
      color: #7a2f4a;
      font-weight: 600;
      cursor: pointer;
      font-size: 14px;
    }

    .btn-secondary {
      padding: 12px 24px;
      background: #f5f5f5;
      border: none;
      border-radius: 999px;
      color: #666;
      font-weight: 500;
      cursor: pointer;
      font-size: 14px;
    }

    .delete-btn {
      background: #ffe6e6;
      color: #d32f2f;
      padding: 8px 16px;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
      margin-top: 10px;
    }

    .delete-btn:hover {
      background: #ffcccc;
    }

    @media (max-width: 768px) {
      .stage {
        flex-direction: column;
      }
      .nav {
        flex-direction: row;
        width: 100%;
        justify-content: center;
      }
      .polaroid {
        width: 100%;
      }
      .photo {
        height: 300px;
      }
    }
  </style>
</head>
<body>
  <!-- Animated Background Decorations -->
  <div class="bg-decoration">
    <div class="glow-orb glow-orb-1"></div>
    <div class="glow-orb glow-orb-2"></div>
    <div class="glow-orb glow-orb-3"></div>
    <div class="floating-heart">üíï</div>
    <div class="floating-heart">üíñ</div>
    <div class="floating-heart">üíó</div>
    <div class="floating-heart">üíù</div>
    <div class="floating-heart">üíï</div>
    <div class="floating-heart">üíñ</div>
    <div class="floating-heart">üíó</div>
    <div class="floating-heart">üíù</div>
    <div class="floating-heart">üíï</div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
  </div>

  <div class="intro-screen" id="intro">
    <div class="heart-loader-container show" id="heartLoader">
      <svg class="heart-loader" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 90 90" version="1.1">
        <g class="heart-loader__group">
          <path class="heart-loader__square" stroke-width="1" fill="none" d="M0,30 0,90 60,90 60,30z"/>
          <path class="heart-loader__circle m--left" stroke-width="1" fill="none" d="M60,60 a30,30 0 0,1 -60,0 a30,30 0 0,1 60,0"/>
          <path class="heart-loader__circle m--right" stroke-width="1" fill="none" d="M60,60 a30,30 0 0,1 -60,0 a30,30 0 0,1 60,0"/>
          <path class="heart-loader__heartPath" stroke-width="2" d="M60,30 a30,30 0 0,1 0,60 L0,90 0,30 a30,30 0 0,1 60,0" />
        </g>
      </svg>
    </div>
    <div class="intro-title">Our Memory Album üíï</div>
    <div class="intro-subtitle">A place to keep all our special moments together</div>
    <button class="enter-btn" id="enterBtn">Enter</button>
  </div>

  <!-- Lyrics Background Display -->
  <div class="lyrics-container" id="lyricsContainer">
    <div class="lyrics-content" id="lyricsContent"></div>
  </div>

  <div class="wrap" id="albumWrap">
    <main class="album" role="main">
      <header>
        <div class="header-left">
          <div class="logo">üíï</div>
          <div>
            <h1>Our Memory Album</h1>
            <p class="lead">Flip through our beautiful moments together</p>
          </div>
        </div>
        <button class="add-memory-btn" id="addMemoryBtn">+ Add Memory</button>
      </header>

      <section class="stage" id="stage">
        <div class="frame">
          <div class="polaroid" id="polaroid">
            <div class="date" id="date"></div>
            <div class="photo" id="photo"></div>
            <div class="caption" id="caption">Add your first memory to get started! üíï</div>
          </div>
        </div>
        <aside class="nav">
          <button class="btn" id="prev">‚óÄ</button>
          <div class="page-ind" id="pageInd">0 / 0</div>
          <button class="btn" id="next">‚ñ∂</button>
        </aside>
      </section>

      <div class="controls">
        <button class="play" id="playBtn">Play music ‚ñ∂</button>
        <button class="toggle-lyrics" id="toggleLyrics">Show Lyrics</button>
      </div>

      <footer>
        <div class="small">üíï Memories saved locally in your browser</div>
        <button class="heart" id="secretBtn">‚ù§Ô∏è Secret Message</button>
      </footer>

      <audio id="bgAudio" loop preload="auto">
        <source src="all-roads-lead-to-rome.mp3" type="audio/mpeg">
      </audio>
    </main>
  </div>

  <!-- Add Memory Modal -->
  <div class="modal" id="memoryModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">Add New Memory</h2>
        <button class="close-btn" id="closeModal">√ó</button>
      </div>
      <form id="memoryForm">
        <div class="form-group">
          <label for="memoryDate">Date</label>
          <input type="date" id="memoryDate" required>
        </div>
        <div class="form-group">
          <label for="memoryCaption">Caption</label>
          <textarea id="memoryCaption" placeholder="What was special about this moment?" required></textarea>
        </div>
        <div class="form-group">
          <label for="memoryPhoto">Photo URL</label>
          <input type="url" id="memoryPhoto" placeholder="https://example.com/image.jpg" required>
          <div class="url-input-hint">
            üí° Tip: Upload images to your GitHub repo and use the raw URL (click "Raw" button on GitHub), or use any image URL from the web
          </div>
          <img id="photoPreview" class="image-preview" alt="Preview">
          <div class="preview-error" id="previewError">Could not load image. Please check the URL.</div>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancelBtn">Cancel</button>
          <button type="submit" class="btn-primary">Save Memory</button>
        </div>
        <div id="deleteSection" style="display: none;">
          <button type="button" class="delete-btn" id="deleteBtn">Delete Memory</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Initialize Twemoji for iOS-style emojis on all platforms
    function parseEmojis(element = document.body) {
      if (typeof twemoji !== 'undefined') {
        twemoji.parse(element, {
          folder: 'svg',
          ext: '.svg'
        });
      }
    }

    // Parse emojis on page load
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => parseEmojis());
    } else {
      parseEmojis();
    }

    // Load memories from localStorage
    let memories = JSON.parse(localStorage.getItem('memories')) || [];
    let currentIndex = 0;
    let editingIndex = -1;

    // DOM elements
    const intro = document.getElementById('intro');
    const albumWrap = document.getElementById('albumWrap');
    const enterBtn = document.getElementById('enterBtn');
    const addMemoryBtn = document.getElementById('addMemoryBtn');
    const memoryModal = document.getElementById('memoryModal');
    const closeModal = document.getElementById('closeModal');
    const cancelBtn = document.getElementById('cancelBtn');
    const memoryForm = document.getElementById('memoryForm');
    const photoEl = document.getElementById('photo');
    const captionEl = document.getElementById('caption');
    const dateEl = document.getElementById('date');
    const pageInd = document.getElementById('pageInd');
    const prev = document.getElementById('prev');
    const next = document.getElementById('next');
    const photoInput = document.getElementById('memoryPhoto');
    const photoPreview = document.getElementById('photoPreview');
    const previewError = document.getElementById('previewError');
    const deleteSection = document.getElementById('deleteSection');
    const deleteBtn = document.getElementById('deleteBtn');
    const modalTitle = document.getElementById('modalTitle');
    const audio = document.getElementById('bgAudio');

    // Intro screen
    enterBtn.addEventListener('click', () => {
      intro.style.opacity = 0;
      setTimeout(() => {
        intro.style.display = 'none';
        albumWrap.classList.add('visible');
        render();
      }, 900);
    });

    // Open modal to add memory
    addMemoryBtn.addEventListener('click', () => {
      editingIndex = -1;
      modalTitle.textContent = 'Add New Memory';
      memoryForm.reset();
      photoPreview.classList.remove('show');
      previewError.classList.remove('show');
      deleteSection.style.display = 'none';
      document.getElementById('memoryDate').valueAsDate = new Date();
      memoryModal.classList.add('active');
    });

    // Close modal
    closeModal.addEventListener('click', closeModalFunc);
    cancelBtn.addEventListener('click', closeModalFunc);
    memoryModal.addEventListener('click', (e) => {
      if (e.target === memoryModal) closeModalFunc();
    });

    function closeModalFunc() {
      memoryModal.classList.remove('active');
      editingIndex = -1;
    }

    // Photo preview from URL
    photoInput.addEventListener('input', (e) => {
      const url = e.target.value.trim();
      if (url) {
        // Test if image loads
        const img = new Image();
        img.onload = () => {
          photoPreview.src = url;
          photoPreview.classList.add('show');
          previewError.classList.remove('show');
        };
        img.onerror = () => {
          photoPreview.classList.remove('show');
          previewError.classList.add('show');
        };
        img.src = url;
      } else {
        photoPreview.classList.remove('show');
        previewError.classList.remove('show');
      }
    });

    // Save memory
    memoryForm.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const date = document.getElementById('memoryDate').value;
      const caption = document.getElementById('memoryCaption').value;
      const photoUrl = photoInput.value.trim();

      if (!photoUrl) {
        alert('Please enter a photo URL!');
        return;
      }

      // Validate URL format
      try {
        new URL(photoUrl);
      } catch {
        alert('Please enter a valid URL!');
        return;
      }

      const memory = {
        date: date,
        caption: caption,
        photo: photoUrl // Store as URL
      };

      if (editingIndex >= 0) {
        memories[editingIndex] = memory;
      } else {
        memories.push(memory);
      }

      saveMemories();
      closeModalFunc();
      render();
    });

    // Delete memory
    deleteBtn.addEventListener('click', () => {
      if (confirm('Are you sure you want to delete this memory?')) {
        memories.splice(editingIndex, 1);
        saveMemories();
        closeModalFunc();
        if (currentIndex >= memories.length) {
          currentIndex = Math.max(0, memories.length - 1);
        }
        render();
      }
    });

    // Edit memory (double click on photo)
    photoEl.addEventListener('dblclick', () => {
      if (memories.length > 0) {
        editMemory(currentIndex);
      }
    });

    function editMemory(index) {
      editingIndex = index;
      const memory = memories[index];
      modalTitle.textContent = 'Edit Memory';
      document.getElementById('memoryDate').value = memory.date;
      document.getElementById('memoryCaption').value = memory.caption;
      photoInput.value = memory.photo;
      photoPreview.src = memory.photo;
      photoPreview.classList.add('show');
      previewError.classList.remove('show');
      deleteSection.style.display = 'block';
      memoryModal.classList.add('active');
    }

    // Navigation
    prev.addEventListener('click', () => {
      if (memories.length > 0) {
        currentIndex = (currentIndex - 1 + memories.length) % memories.length;
        render();
      }
    });

    next.addEventListener('click', () => {
      if (memories.length > 0) {
        currentIndex = (currentIndex + 1) % memories.length;
        render();
      }
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (memoryModal.classList.contains('active')) return;
      if (e.key === 'ArrowLeft') prev.click();
      if (e.key === 'ArrowRight') next.click();
    });

    // Render current memory
    function render() {
      if (memories.length === 0) {
        photoEl.style.backgroundImage = 'none';
        photoEl.style.backgroundColor = '#f5f5f5';
        captionEl.textContent = 'Add your first memory to get started! üíï';
        dateEl.textContent = '';
        pageInd.textContent = '0 / 0';
        parseEmojis(captionEl);
        return;
      }

      const memory = memories[currentIndex];
      photoEl.style.opacity = 0;
      setTimeout(() => {
        photoEl.style.backgroundImage = `url('${memory.photo}')`;
        photoEl.style.backgroundColor = 'transparent';
        captionEl.textContent = memory.caption;
        const date = new Date(memory.date);
        dateEl.textContent = date.toLocaleDateString('en-US', { 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric' 
        });
        pageInd.textContent = `${currentIndex + 1} / ${memories.length}`;
        photoEl.style.opacity = 1;
        parseEmojis(captionEl);
      }, 250);
    }

    // Save to localStorage
    function saveMemories() {
      localStorage.setItem('memories', JSON.stringify(memories));
    }

    // Lyrics data - Edit these with your song's lyrics and timestamps (in seconds)
    const lyrics = [
      { time: 0, text: "All roads lead to Rome" },
      { time: 4, text: "But I'd rather be with you" },
      { time: 8, text: "Every path I take" },
      { time: 12, text: "Leads me back to you" },
      { time: 16, text: "Through the winding streets" },
      { time: 20, text: "And the ancient stones" },
      { time: 24, text: "I find my way home" },
      { time: 28, text: "When I'm with you" },
      { time: 32, text: "All roads lead to Rome" },
      { time: 36, text: "But my heart leads to you" },
      { time: 40, text: "In this world so wide" },
      { time: 44, text: "You're my destination" },
      { time: 48, text: "Every step I take" },
      { time: 52, text: "Every choice I make" },
      { time: 56, text: "Brings me closer to you" },
      { time: 60, text: "All roads lead to Rome" },
      { time: 64, text: "But I'd rather be with you" }
    ];

    // Lyrics display
    const lyricsContainer = document.getElementById('lyricsContainer');
    const lyricsContent = document.getElementById('lyricsContent');
    const toggleLyricsBtn = document.getElementById('toggleLyrics');
    let lyricsVisible = false;
    let currentLyricIndex = 0;

    // Initialize lyrics display
    function initLyrics() {
      lyricsContent.innerHTML = lyrics.map((lyric, index) => 
        `<div class="lyrics-line" data-index="${index}">${lyric.text}</div>`
      ).join('');
      parseEmojis(lyricsContent);
    }

    // Toggle lyrics visibility
    toggleLyricsBtn.addEventListener('click', () => {
      lyricsVisible = !lyricsVisible;
      if (lyricsVisible) {
        lyricsContainer.classList.add('show');
        toggleLyricsBtn.textContent = 'Hide Lyrics';
      } else {
        lyricsContainer.classList.remove('show');
        toggleLyricsBtn.textContent = 'Show Lyrics';
      }
    });

    // Update lyrics based on current time
    function updateLyrics(currentTime) {
      if (!lyricsVisible) return;

      // Find the current lyric based on time
      let newIndex = 0;
      for (let i = lyrics.length - 1; i >= 0; i--) {
        if (currentTime >= lyrics[i].time) {
          newIndex = i;
          break;
        }
      }

      // Update active line
      if (newIndex !== currentLyricIndex) {
        const lines = lyricsContent.querySelectorAll('.lyrics-line');
        
        // Remove previous active states
        lines.forEach((line, index) => {
          line.classList.remove('active', 'past');
          if (index < newIndex) {
            line.classList.add('past');
          }
        });

        // Add active state to current line
        if (lines[newIndex]) {
          lines[newIndex].classList.add('active');
        }

        currentLyricIndex = newIndex;
      }
    }

    // Music player
    const playBtn = document.getElementById('playBtn');
    let playing = false;
    playBtn.addEventListener('click', async () => {
      if (!playing) {
        try {
          await audio.play();
          playing = true;
          playBtn.textContent = 'Pause music ‚è∏';
        } catch (e) {
          console.log('Audio play failed:', e);
        }
      } else {
        audio.pause();
        playing = false;
        playBtn.textContent = 'Play music ‚ñ∂';
      }
    });

    // Sync lyrics with audio
    let lastTime = 0;
    audio.addEventListener('timeupdate', () => {
      if (playing) {
        // Check if audio looped
        if (audio.currentTime < lastTime - 1) {
          // Audio looped - reset lyrics
          currentLyricIndex = 0;
          if (lyricsVisible) {
            const lines = lyricsContent.querySelectorAll('.lyrics-line');
            lines.forEach(line => {
              line.classList.remove('active', 'past');
            });
          }
        }
        updateLyrics(audio.currentTime);
        lastTime = audio.currentTime;
      }
    });

    // Initialize lyrics on load
    initLyrics();

    // Secret button
    const secretBtn = document.getElementById('secretBtn');
    secretBtn.addEventListener('click', () => {
      const messages = [
        'Every memory with you is my favorite ‚ù§Ô∏è',
        'You make every moment special üíï',
        'I love creating memories with you üåü',
        'Thank you for all the beautiful moments ‚ú®',
        'Here\'s to many more memories together ü•Ç'
      ];
      const randomMessage = messages[Math.floor(Math.random() * messages.length)];
      alert(randomMessage);
    });

    // Initial render
    render();
  </script>
</body>
</html>
